/**
 * Density Modes - Layer 1.5
 *
 * Professional desktop applications (Figma, Gmail, Linear) offer density controls
 * to let users optimize information density for their workflow.
 *
 * Following industry best practices:
 * - Compact: Power users, maximize information density
 * - Comfortable: Default, balanced spacing (our current design)
 * - Spacious: Accessibility, generous spacing for readability
 *
 * @see https://m3.material.io/foundations/layout/applying-layout/compact
 * @see https://www.figma.com/blog/compact-mode/
 */

@layer density {
  /**
   * Default: Comfortable Mode
   *
   * Our new desktop-optimized defaults (already implemented):
   * - Base font: 14px
   * - Button height: 32px
   * - Input height: 32px
   * - Card padding: 12px
   * - Component spacing: 12px
   */
  :root {
    --density-scale: 1;
    --density-component-height-scale: 1;
  }

  /**
   * Compact Mode - Maximum Information Density
   *
   * For power users who want to see more content:
   * - Reduce spacing by 25%
   * - Reduce component heights by 12.5%
   * - Tighter line heights
   *
   * Example: Button 32px → 28px, Card padding 12px → 9px
   */
  [data-density="compact"] {
    /* Spacing scale: 75% of comfortable */
    --density-scale: 0.75;

    /* Component heights: 87.5% of comfortable */
    --density-component-height-scale: 0.875;

    /* Typography adjustments */
    --leading-normal: 1.3;     /* Tighter line height */
    --leading-relaxed: 1.4;

    /* Specific component overrides */
    --space-component: var(--spacing-2);   /* 8px instead of 12px */
    --space-card: var(--spacing-3);        /* 12px instead of 16px */
    --space-section: var(--spacing-4);     /* 16px instead of 24px */
  }

  /**
   * Spacious Mode - Maximum Readability
   *
   * For accessibility and users who prefer generous spacing:
   * - Increase spacing by 25%
   * - Increase component heights by 12.5%
   * - More relaxed line heights
   *
   * Example: Button 32px → 36px, Card padding 12px → 15px
   */
  [data-density="spacious"] {
    /* Spacing scale: 125% of comfortable */
    --density-scale: 1.25;

    /* Component heights: 112.5% of comfortable */
    --density-component-height-scale: 1.125;

    /* Typography adjustments */
    --leading-normal: 1.5;     /* More relaxed line height */
    --leading-relaxed: 1.6;

    /* Specific component overrides */
    --space-component: var(--spacing-4);   /* 16px instead of 12px */
    --space-card: var(--spacing-5);        /* 20px instead of 16px */
    --space-section: var(--spacing-8);     /* 32px instead of 24px */
  }

  /**
   * Apply density scales to components
   *
   * Components can use these CSS variables to scale their sizing.
   * This allows user preference to control information density.
   */

  /* Buttons with density scaling */
  [data-density="compact"] [data-slot="button"] {
    --button-height-sm: 1.5rem;      /* 24px */
    --button-height-default: 1.75rem; /* 28px */
    --button-height-lg: 2rem;         /* 32px */
  }

  [data-density="spacious"] [data-slot="button"] {
    --button-height-sm: 2rem;         /* 32px */
    --button-height-default: 2.25rem; /* 36px */
    --button-height-lg: 2.5rem;       /* 40px */
  }

  /* Inputs with density scaling */
  [data-density="compact"] [data-slot="input"] {
    height: 1.75rem;  /* 28px */
    font-size: 0.75rem;  /* 12px */
  }

  [data-density="spacious"] [data-slot="input"] {
    height: 2.25rem;  /* 36px */
    font-size: 0.875rem;  /* 14px */
  }

  /* Cards with density scaling */
  [data-density="compact"] [data-slot="card"] {
    padding: 0.5rem 0;  /* 8px vertical */
    gap: 0.5rem;        /* 8px gap */
  }

  [data-density="compact"] [data-slot="card-header"],
  [data-density="compact"] [data-slot="card-content"],
  [data-density="compact"] [data-slot="card-footer"] {
    padding-left: 0.5rem;   /* 8px */
    padding-right: 0.5rem;  /* 8px */
  }

  [data-density="spacious"] [data-slot="card"] {
    padding: 1rem 0;  /* 16px vertical */
    gap: 1rem;        /* 16px gap */
  }

  [data-density="spacious"] [data-slot="card-header"],
  [data-density="spacious"] [data-slot="card-content"],
  [data-density="spacious"] [data-slot="card-footer"] {
    padding-left: 1rem;   /* 16px */
    padding-right: 1rem;  /* 16px */
  }

  /* Table rows with density scaling */
  [data-density="compact"] [role="row"] {
    height: 2rem;  /* 32px */
    padding: 0.25rem 0.5rem;  /* 4px 8px */
  }

  [data-density="spacious"] [role="row"] {
    height: 3rem;  /* 48px */
    padding: 0.75rem 1rem;  /* 12px 16px */
  }

  /* Sidebar with density scaling */
  [data-density="compact"] [data-slot="sidebar-nav-item"] {
    --sidebar-item-padding-y: 0.25rem;  /* 4px */
  }

  [data-density="spacious"] [data-slot="sidebar-nav-item"] {
    --sidebar-item-padding-y: 0.75rem;  /* 12px */
  }

  /**
   * Accessibility: Respect user's motion preferences
   *
   * Density changes should be instant if user prefers reduced motion.
   */
  @media (prefers-reduced-motion: reduce) {
    [data-density] {
      transition: none;
    }
  }

  /**
   * Accessibility: Minimum touch targets
   *
   * Even in compact mode, ensure touch targets meet 44x44px minimum
   * on touch-enabled devices for accessibility.
   */
  @media (pointer: coarse) {
    [data-density="compact"] [data-slot="button"],
    [data-density="compact"] [data-slot="input"] {
      min-height: 2.75rem;  /* 44px minimum for touch */
    }
  }
}
