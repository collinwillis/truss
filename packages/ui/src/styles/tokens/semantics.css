/**
 * Semantic Design Tokens - Layer 2
 *
 * Purpose-driven tokens that reference primitive values.
 * These tokens have semantic meaning and adapt based on theme/mode.
 *
 * Following shadcn/ui and Tailwind v4 patterns:
 * - Clear semantic naming
 * - Context-aware values
 * - Dark mode support
 * - Brand-agnostic defaults
 *
 * @see https://ui.shadcn.com/docs/theming
 * @see https://tailwindcss.com/docs/theme
 */

@layer semantics {
  /**
   * Default Semantic Tokens - Neutral Theme
   *
   * These provide a neutral base that works for all apps.
   * Brand-specific overrides are applied via data-app attributes.
   */
  :root {
    /* ============================================
       Surface Hierarchy
       ============================================ */

    /* Background surfaces - from back to front */
    --background: var(--gray-50);
    --background-subtle: oklch(0.992 0 0);
    --background-muted: var(--gray-100);

    /* Foreground text colors */
    --foreground: var(--gray-900);
    --foreground-muted: var(--gray-500);
    --foreground-subtle: var(--gray-400);

    /* Card and popover surfaces */
    --card: var(--gray-50);
    --card-foreground: var(--gray-900);

    --popover: var(--gray-50);
    --popover-foreground: var(--gray-900);

    /* ============================================
       Brand Colors - Semantic Mappings
       ============================================ */

    /* Primary - Main brand color */
    --primary: var(--gray-900);
    --primary-foreground: var(--gray-50);

    /* Secondary - Supporting brand color */
    --secondary: var(--gray-100);
    --secondary-foreground: var(--gray-900);

    /* Accent - Interactive highlights */
    --accent: var(--gray-100);
    --accent-foreground: var(--gray-900);

    /* Muted - Subdued elements */
    --muted: var(--gray-100);
    --muted-foreground: var(--gray-500);

    /* ============================================
       Semantic State Colors
       ============================================ */

    /* Destructive/Error states */
    --destructive: var(--red-400);
    --destructive-foreground: var(--gray-50);

    /* Success states */
    --success: var(--green-400);
    --success-foreground: var(--gray-50);

    /* Warning states */
    --warning: var(--amber-400);
    --warning-foreground: var(--gray-950);

    /* Info states */
    --info: var(--blue-400);
    --info-foreground: var(--gray-50);

    /* ============================================
       Interactive Elements
       ============================================ */

    /* Borders */
    --border: var(--gray-200);
    --border-subtle: var(--gray-100);
    --border-strong: var(--gray-300);

    /* Input fields */
    --input: var(--gray-200);
    --input-hover: var(--gray-300);
    --input-focus: var(--primary);
    --input-invalid: var(--destructive);

    /* Focus ring - Desktop-optimized */
    --ring: var(--gray-900);
    --ring-offset: var(--gray-50);
    --ring-width: var(--focus-ring-width);           /* 2px */
    --ring-offset-width: var(--focus-ring-offset);   /* 2px */
    --ring-opacity: var(--focus-ring-opacity);       /* 0.5 (50%) */

    /* ============================================
       Interactive State Colors
       Desktop-standard hover, active, and selection states
       ============================================ */

    /* Hover states - subtle background overlays */
    --hover-overlay: color-mix(in oklch, var(--foreground) var(--state-hover-opacity), transparent);
    --hover-overlay-strong: color-mix(in oklch, var(--foreground) var(--state-hover-opacity-strong), transparent);

    /* Active/Pressed states - clear feedback */
    --active-overlay: color-mix(in oklch, var(--foreground) var(--state-active-opacity), transparent);
    --active-overlay-strong: color-mix(in oklch, var(--foreground) var(--state-active-opacity-strong), transparent);

    /* Selected states - sustained selection */
    --selected-overlay: color-mix(in oklch, var(--primary) var(--state-selected-opacity), transparent);
    --selected-overlay-strong: color-mix(in oklch, var(--primary) var(--state-selected-opacity-strong), transparent);

    /* Selection colors - text and item selection */
    --selection-bg: color-mix(in oklch, var(--primary) var(--selection-text-opacity), transparent);
    --selection-fg: var(--primary-foreground);

    /* Item selection (lists, tables, sidebar items) */
    --item-selected-bg: color-mix(in oklch, var(--primary) var(--selection-item-opacity), transparent);
    --item-selected-hover-bg: color-mix(in oklch, var(--primary) var(--selection-item-opacity-hover), transparent);

    /* ============================================
       Layout Tokens
       ============================================ */

    /* Border radius semantic mappings */
    --radius: var(--radius-lg);              /* 8px - Default */
    --radius-sm: var(--radius-md);           /* 6px */
    --radius-md: var(--radius-lg);           /* 8px */
    --radius-lg: var(--radius-xl);           /* 12px */

    /* Spacing semantic mappings */
    --space-page: var(--spacing-8);          /* 32px */
    --space-section: var(--spacing-6);       /* 24px */
    --space-card: var(--spacing-4);          /* 16px */
    --space-component: var(--spacing-3);     /* 12px */
    --space-element: var(--spacing-2);       /* 8px */

    /* ============================================
       Typography Tokens
       ============================================ */

    --font-sans: var(--font-sans-system);
    --font-serif: var(--font-serif-system);
    --font-mono: var(--font-mono-system);

    /* ============================================
       Scrollbar Tokens
       ============================================ */

    --scroll-track: var(--gray-100);
    --scroll-thumb: var(--gray-300);
    --scroll-thumb-hover: var(--gray-400);
  }

  /**
   * Dark Mode Semantic Tokens
   *
   * Inverted color scheme for low-light environments.
   * Maintains WCAG AA+ contrast ratios.
   */
  .dark {
    /* Surface Hierarchy */
    --background: var(--gray-900);
    --background-subtle: var(--gray-950);
    --background-muted: var(--gray-800);

    --foreground: var(--gray-50);
    --foreground-muted: var(--gray-400);
    --foreground-subtle: var(--gray-500);

    --card: var(--gray-900);
    --card-foreground: var(--gray-50);

    --popover: var(--gray-900);
    --popover-foreground: var(--gray-50);

    /* Brand Colors */
    --primary: var(--gray-50);
    --primary-foreground: var(--gray-900);

    --secondary: var(--gray-800);
    --secondary-foreground: var(--gray-50);

    --accent: var(--gray-800);
    --accent-foreground: var(--gray-50);

    --muted: var(--gray-800);
    --muted-foreground: var(--gray-400);

    /* State Colors - Adjusted for dark backgrounds */
    --destructive: var(--red-500);
    --destructive-foreground: var(--gray-50);

    --success: var(--green-500);
    --success-foreground: var(--gray-950);

    --warning: var(--amber-500);
    --warning-foreground: var(--gray-950);

    --info: var(--blue-500);
    --info-foreground: var(--gray-50);

    /* Interactive Elements */
    --border: var(--gray-700);
    --border-subtle: var(--gray-800);
    --border-strong: var(--gray-600);

    --input: var(--gray-700);
    --input-hover: var(--gray-600);

    /* Focus ring - inherits width/offset from light mode, updates colors */
    --ring: var(--gray-300);
    --ring-offset: var(--gray-900);

    /* Interactive state colors - adjusted for dark mode */
    --hover-overlay: color-mix(in oklch, var(--foreground) var(--state-hover-opacity), transparent);
    --hover-overlay-strong: color-mix(in oklch, var(--foreground) var(--state-hover-opacity-strong), transparent);

    --active-overlay: color-mix(in oklch, var(--foreground) var(--state-active-opacity), transparent);
    --active-overlay-strong: color-mix(in oklch, var(--foreground) var(--state-active-opacity-strong), transparent);

    --selected-overlay: color-mix(in oklch, var(--primary) var(--state-selected-opacity), transparent);
    --selected-overlay-strong: color-mix(in oklch, var(--primary) var(--state-selected-opacity-strong), transparent);

    --selection-bg: color-mix(in oklch, var(--primary) var(--selection-text-opacity), transparent);
    --selection-fg: var(--primary-foreground);

    --item-selected-bg: color-mix(in oklch, var(--primary) var(--selection-item-opacity), transparent);
    --item-selected-hover-bg: color-mix(in oklch, var(--primary) var(--selection-item-opacity-hover), transparent);

    /* Scrollbar */
    --scroll-track: var(--gray-800);
    --scroll-thumb: var(--gray-600);
    --scroll-thumb-hover: var(--gray-500);
  }

  /**
   * Precision App - Teal Theme Overrides
   *
   * Professional teal branding for construction estimation.
   */
  :root[data-app="precision"] {
    /* Light mode brand colors */
    --primary: var(--teal-500);
    --primary-foreground: var(--gray-50);

    --secondary: var(--teal-100);
    --secondary-foreground: var(--teal-800);

    --accent: var(--teal-100);
    --accent-foreground: var(--teal-700);

    --muted: oklch(0.972 0.003 197.1);
    --muted-foreground: oklch(0.576 0.027 196.43);

    /* Interactive elements with brand color */
    --ring: var(--teal-500);
    --input-focus: var(--teal-500);

    /* Success with teal undertones */
    --success: oklch(0.707 0.163 155.35);
    --success-foreground: var(--gray-50);

    /* Scrollbar with brand accent */
    --scroll-thumb-hover: var(--teal-500);
  }

  .dark[data-app="precision"] {
    /* Dark mode brand colors */
    --primary: oklch(0.817 0.127 194.95);
    --primary-foreground: var(--teal-950);

    --secondary: var(--teal-900);
    --secondary-foreground: var(--teal-100);

    --accent: var(--teal-900);
    --accent-foreground: var(--teal-200);

    --muted: oklch(0.294 0.017 196.28);
    --muted-foreground: oklch(0.7 0.023 196.64);

    /* Interactive elements */
    --ring: oklch(0.833 0.12 195.09);
    --input-focus: var(--primary);

    /* Success with teal undertones */
    --success: oklch(0.749 0.167 155.95);
    --success-foreground: var(--green-950);

    /* Scrollbar */
    --scroll-thumb-hover: var(--teal-400);
  }

  /**
   * Momentum App - Purple Theme Overrides
   *
   * Energetic purple branding for time tracking.
   */
  :root[data-app="momentum"] {
    /* Light mode brand colors */
    --primary: var(--purple-500);
    --primary-foreground: var(--gray-50);

    --secondary: var(--purple-100);
    --secondary-foreground: var(--purple-800);

    --accent: var(--purple-100);
    --accent-foreground: var(--purple-700);

    --muted: oklch(0.966 0.006 308.39);
    --muted-foreground: oklch(0.524 0.057 307.25);

    /* Interactive elements with brand color */
    --ring: var(--purple-500);
    --input-focus: var(--purple-500);

    /* Info with purple undertones */
    --info: oklch(0.5 0.216 282.94);
    --info-foreground: var(--gray-50);

    /* Scrollbar with brand accent */
    --scroll-thumb-hover: var(--purple-500);
  }

  .dark[data-app="momentum"] {
    /* Dark mode brand colors */
    --primary: oklch(0.588 0.222 303.07);
    --primary-foreground: var(--purple-950);

    --secondary: var(--purple-900);
    --secondary-foreground: var(--purple-100);

    --accent: var(--purple-900);
    --accent-foreground: var(--purple-200);

    --muted: oklch(0.263 0.032 307.1);
    --muted-foreground: oklch(0.656 0.048 307.65);

    /* Interactive elements */
    --ring: oklch(0.633 0.198 304.41);
    --input-focus: var(--primary);

    /* Info with purple undertones */
    --info: oklch(0.551 0.194 285.76);
    --info-foreground: var(--purple-950);

    /* Scrollbar */
    --scroll-thumb-hover: var(--purple-400);
  }
}